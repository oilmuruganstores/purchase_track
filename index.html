<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Oil Murugan Stores | Purchase Register</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:"Poppins","Segoe UI",sans-serif;
  background:
    linear-gradient(135deg,rgba(253,230,138,.85),rgba(253,186,116,.85)),
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='800' height='400'%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dominant-baseline='middle' fill='rgba(0,0,0,0.04)' font-size='80' font-family='Arial Black'%3EOIL MURUGAN STORES%3C/text%3E%3C/svg%3E");
  background-repeat:repeat;
}
:root{
  --oil:#ca8a04;
  --green:#15803d;
  --red:#b91c1c;
  --card:#fff;
}
.app{
  max-width:1500px;
  margin:auto;
  padding:24px;
}

/* HEADER */
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:20px;
}
.header h1{
  margin:0;
  font-size:34px;
  color:#713f12;
}
.header span{
  font-weight:700;
  color:#854d0e;
}

/* DATE BAR */
.date-bar{
  background:#fff7ed;
  border:2px solid #f59e0b;
  border-radius:18px;
  padding:14px 20px;
  display:flex;
  gap:20px;
  align-items:center;
  margin-bottom:20px;
}
.date-bar label{
  font-weight:700;
  color:#92400e;
}

/* DASHBOARD */
.dashboard{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:16px;
  margin-bottom:20px;
}
.card{
  background:var(--card);
  border-radius:22px;
  padding:22px;
  box-shadow:0 12px 30px rgba(0,0,0,.15);
  border-top:6px solid var(--oil);
}
.card p{
  margin:0;
  font-weight:600;
  color:#92400e;
}
.card h2{
  margin-top:12px;
  font-size:30px;
}

/* ENTRY BOX */
.entry-box{
  background:#fffbeb;
  border-radius:22px;
  padding:20px;
  margin-bottom:20px;
  box-shadow:0 10px 25px rgba(0,0,0,.12);
  border-left:6px solid #16a34a;
}
.form-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:14px;
}
input,button{
  padding:14px;
  border-radius:14px;
  border:2px solid #fde68a;
  font-size:15px;
}
button{
  background:linear-gradient(135deg,#22c55e,#16a34a);
  border:none;
  font-weight:800;
  color:#fff;
  cursor:pointer;
}

/* TABLE */
.table-box{
  background:#fff;
  border-radius:22px;
  overflow:hidden;
  box-shadow:0 15px 35px rgba(0,0,0,.18);
}
th{
  background:linear-gradient(135deg,#92400e,#78350f);
  color:#fff;
  padding:16px;
}
td{
  padding:16px;
  border-bottom:1px solid #fde68a;
}
tr:hover{
  background:#fffbeb;
}

/* CONDITIONAL */
.good{background:#dcfce7;color:#166534;font-weight:800;border-radius:10px}
.warn{background:#ffedd5;color:#9a3412;font-weight:800;border-radius:10px}
.bad{background:#fee2e2;color:#991b1b;font-weight:900;border-radius:10px}
</style>
</head>

<body>
<div class="app">

<!-- HEADER -->
<div class="header">
  <h1>OIL MURUGAN STORES</h1>
  <span>Wholesale Purchase Register</span>
</div>

<!-- DATE BAR -->
<div class="date-bar">
  <label>Select Date</label>
  <input type="date" id="mainDate">
</div>

<!-- DASHBOARD -->
<div class="dashboard">
  <div class="card"><p>Total Purchase</p><h2 id="dBill">Rs. 0</h2></div>
  <div class="card"><p>Total Paid</p><h2 id="dPaid">Rs. 0</h2></div>
  <div class="card"><p>Total Pending</p><h2 id="dPending">Rs. 0</h2></div>
</div>

<!-- ENTRY -->
<div class="entry-box">
  <div class="form-grid">
    <input id="supplier" placeholder="Supplier / Agency Name">
    <input id="bill" type="number" placeholder="Bill Amount (Rs.)">
    <input id="cash" type="number" placeholder="Cash" value="0">
    <input id="upi" type="number" placeholder="UPI" value="0">
    <input id="net" type="number" placeholder="Net Banking" value="0">
    <button onclick="saveEntry()">ADD PURCHASE</button>
  </div>
</div>

<!-- TABLE -->
<div class="table-box">
<table>
<thead>
<tr>
<th>Supplier</th>
<th>Bill</th>
<th>Paid</th>
<th>Pending</th>
</tr>
</thead>
<tbody id="rows"></tbody>
</table>
</div>

</div>

<script>
const today=new Date().toISOString().split("T")[0];
mainDate.value=today;
let selectedDate=today;
let data=JSON.parse(localStorage.getItem("purchase_brand"))||[];

mainDate.onchange=()=>{
 selectedDate=mainDate.value;
 render();
};

function paid(e){
 return (e.cash||0)+(e.upi||0)+(e.net||0);
}

function save(){
 localStorage.setItem("purchase_brand",JSON.stringify(data));
}

function saveEntry(){
 let e={
  supplier:supplier.value.trim(),
  bill:+bill.value,
  cash:+cash.value,
  upi:+upi.value,
  net:+net.value,
  date:selectedDate
 };
 if(!e.supplier||!e.bill)return alert("Enter supplier & bill");
 if(paid(e)>e.bill)return alert("Paid exceeds bill");
 data.push(e);
 supplier.value=bill.value="";
 cash.value=upi.value=net.value=0;
 save();render();
}

function render(){
 rows.innerHTML="";
 let tb=0,tp=0;
 data.filter(e=>e.date===selectedDate).forEach(e=>{
  let p=paid(e);
  tb+=e.bill;tp+=p;
  let pend=e.bill-p;
  let cls=pend===0?"good":pend<=5000?"warn":"bad";
  rows.innerHTML+=`
  <tr>
   <td>${e.supplier}</td>
   <td>Rs. ${e.bill}</td>
   <td>Rs. ${p}</td>
   <td class="${cls}">Rs. ${pend}</td>
  </tr>`;
 });
 dBill.textContent="Rs. "+tb;
 dPaid.textContent="Rs. "+tp;
 dPending.textContent="Rs. "+(tb-tp);
 save();
}

render();
</script>

</body>
</html>
